@using PropertyCore.Application.Property.Commands.LocationAudit;
@model LocationAuditResultVm

<div>
    <h2>Location Audit Results</h2>
    @if (ViewBag.ReturnUrl != null)
    {
        <a href="@ViewBag.ReturnUrl"><i class="fas fa-angle-left"></i> Back</a>
    }
    <hr />
    <br />
    <h4>Successfully found <span class="text-success">@Model.FoundItemsCount</span> items.</h4>
    <br />
    <hr />
    <h4><span class="text-danger">@Model.NotPresent.Count</span> Scanned Items found outside Location</h4>
    @if(Model.NotPresent.Count > 0)
    {
        <div class="table-responsive-sm">
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>
                            Barcode
                        </th>
                        <th>
                            Case Number
                        </th>
                        <th>
                            Property Sheet
                        </th>
                        <th>
                            Location
                        </th>
                        <th>
                            Type
                        </th>
                        <th>
                            Category
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.NotPresent)
                    {
                        <tr>
                            <td>
                                <a asp-controller="Property"
                                   asp-action="Details"
                                   asp-route-InstanceId="@item.InstanceId"
                                   asp-route-SeqNo1="@item.SeqNo1"
                                   asp-route-returnUrl="/Property/Index@(!String.IsNullOrEmpty(Context.Request.QueryString.ToString()) ? $"{Context.Request.QueryString}" : "")"
                                   target="_blank">
                                    @item.BarCode
                                </a>
                            </td>
                            <td>
                                @item.CaseNumber
                            </td>
                            <td>
                                @item.PropertySheetNumber
                            </td>
                            <td class="text-danger">
                                @item.CurrentLocation
                            </td>
                            <td>
                                @item.PropertyType
                            </td>
                            <td>
                                @item.PropertyCategory
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <span class="text-success">No Items Found</span>
    }
    <hr />
    <h4><span class="text-info">@Model.NotScanned.Count</span> Items in Location that were not Scanned</h4>
    @if (Model.NotScanned.Count > 0)
    {
        <div class="table-responsive-sm">
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>
                            Barcode
                        </th>
                        <th>
                            Case Number
                        </th>
                        <th>
                            Property Sheet
                        </th>
                        <th>
                            Location
                        </th>
                        <th>
                            Type
                        </th>
                        <th>
                            Category
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.NotScanned)
                    {
                        <tr>
                            <td>
                                <a asp-controller="Property"
                                   asp-action="Details"
                                   asp-route-InstanceId="@item.InstanceId"
                                   asp-route-SeqNo1="@item.SeqNo1"
                                   asp-route-returnUrl="/Property/Index@(!String.IsNullOrEmpty(Context.Request.QueryString.ToString()) ? $"{Context.Request.QueryString}" : "")">
                                    @item.BarCode
                                </a>
                            </td>
                            <td>
                                @item.CaseNumber
                            </td>
                            <td>
                                @item.PropertySheetNumber
                            </td>
                            <td class="text-info">
                                @item.CurrentLocation
                            </td>
                            <td>
                                @item.PropertyType
                            </td>
                            <td>
                                @item.PropertyCategory
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <span class="text-success">No Items Found</span>
    }
</div>